{"version":3,"sources":["App/Main/Pages/Others/Unsubscribe.js","Common/API/index.js","Snippets/Spinner/index.js","Common/API sync /.js$","Common/API/GoogleAppScript.js","Components/requestjs/defaults.js","Components/requestjs/utils.js","Components/requestjs/index.js"],"names":["Unsubscribe","useState","done","setDone","email","useParams","className","success","to","label","type","onClick","event","preventDefault","unsubscribed","cookie","get","Toast","create","atob","key","uid","loading","options","duration","request","GoogleAppURL","method","headers","responseType","body","then","response","status","Error","catch","set","btoa","req","require","modules","keys","map","module","exports","reduce","result","current","Object","r","Spinner","props","version","id","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","preserveAspectRatio","width","height","cx","cy","points","stroke","defaultProps","webpackContext","webpackContextResolve","__webpack_require__","o","e","code","resolve","defaults","cache","credentials","timeout","onupload","ondownload","initialize","ServerResponse","xhr","this","data","statusText","getAllResponseHeaders","split","header","value","url","Promise","reject","XMLHttpRequest","open","withCredentials","trim","setRequestHeader","forEach","upload","onprogress","onload","onabort","DOMException","onerror","ontimeout","TypeError","send","global","assign"],"mappings":"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","file":"static/js/9.dcb4688c.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { useParams, Link } from 'reaouter';\r\nimport request from 'requestjs';\r\nimport Toast from 'Snippets/Toast';\r\nimport { Spinner } from 'Snippets/Spinner';\r\nimport { uid, cookie } from 'Common/Utils';\r\nimport { GoogleAppURL } from 'Common/API';\r\n\r\nconst Unsubscribe = () => {\r\n\tconst [done, setDone] = useState(false);\r\n\tconst { email } = useParams();\r\n\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst cookieKey = 'USBC';\r\n\t\tconst unsubscribed = cookie.get(cookieKey);\r\n\t\tif (unsubscribed) {\r\n\t\t\treturn Toast.create(\r\n\t\t\t\t<>\r\n\t\t\t\t\tyou have already unsubscribed <b>{atob(unsubscribed)}</b>. try again\r\n\t\t\t\t\ttomorrow\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst key = uid();\r\n\t\tToast.create(\r\n\t\t\t<div className='d-flex flex-center-y'>\r\n\t\t\t\t<Spinner loading={true} />\r\n\t\t\t\tunsubscribing...\r\n\t\t\t</div>,\r\n\t\t\t{ key, options: { duration: 20000 } }\r\n\t\t);\r\n\r\n\t\trequest(GoogleAppURL, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t\t},\r\n\t\t\tresponseType: 'json',\r\n\t\t\tbody: `subscriber=${email}&action=unsubscribe`,\r\n\t\t})\r\n\t\t.then((response) => {\r\n\t\t\tif (response.status >= 400) {\r\n\t\t\t\tthrow Error('');\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(() => {\r\n\t\t\tToast.create(\r\n\t\t\t\t<div className='d-flex flex-center-y'>\r\n\t\t\t\t\t<Spinner success={true} />\r\n\t\t\t\t\tWe will no longer notify you on anything related mytabworks\r\n\t\t\t\t</div>,\r\n\t\t\t\t{ key, options: { duration: 4000 } }\r\n\t\t\t);\r\n\t\t\tsetDone(true);\r\n\t\t})\r\n\t\t.catch(() =>\r\n\t\t\tToast.create(\r\n\t\t\t\t<div className='d-flex flex-center-y'>\r\n\t\t\t\t\t<Spinner success={false} />\r\n\t\t\t\t\tsomething went wrong try again later\r\n\t\t\t\t</div>,\r\n\t\t\t\t{ key, options: { duration: 4000 } }\r\n\t\t\t)\r\n\t\t);\r\n\t\tcookie.set(cookieKey, btoa(email), 1);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-sm-8 mx-auto'>\r\n\t\t\t\t\t<div className='n-flat p-5 my-5 br-5 t-center'>\r\n\t\t\t\t\t\t{done ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h2 className='my-3'>\r\n\t\t\t\t\t\t\t\t\t<Spinner success='true' /> Successfully unsubscribe\r\n\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t<p className='n-text-dim-color mb-3'>\r\n\t\t\t\t\t\t\t\t\tyou have successfully unsubscribe <b>{email}</b> on{' '}\r\n\t\t\t\t\t\t\t\t\t<b>mytabworks</b><br/>\r\n\t\t\t\t\t\t\t\t\tWe will no longer notify you on anything related{' '}\r\n\t\t\t\t\t\t\t\t\t<b>mytabworks</b>.<br/> but you can still subscribe anytime\r\n\t\t\t\t\t\t\t\t    if you ever changed your mind.\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tclassName='n-btn n-btn-lg d-block w-full mb-3'\r\n\t\t\t\t\t\t\t\t\tto='/'\r\n\t\t\t\t\t\t\t\t\tlabel='Return Home'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h2 className='my-3'>Do you really want to unsubscribe?</h2>\r\n\t\t\t\t\t\t\t\t<p className='n-text-dim-color mb-3'>\r\n\t\t\t\t\t\t\t\t\tyou are currently subscribed to <b>mytabworks</b> as\r\n\t\t\t\t\t\t\t\t\t<br /> <b>{email}</b>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName='n-btn n-btn-lg d-block w-full mb-3'\r\n\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\tonClick={handleSubmit}>\r\n\t\t\t\t\t\t\t\t\tProceed\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Unsubscribe;","const req = require.context('./', true, /.js$/);\r\n\r\nconst modules = req.keys().map(req);\r\n\r\nmodule.exports = modules.reduce((result, current) => {\r\n\tconst keys = Object.keys(current);\r\n\treturn keys.reduce((r, key) => {\r\n\t\tr[key] = current[key];\r\n\t\treturn r;\r\n\t}, result);\r\n}, {});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './index.css';\r\n\r\nconst SpinnerProps = {\r\n    loading: PropTypes.bool,\r\n    success: PropTypes.bool\r\n};\r\nconst SpinnerDefault = {\r\n    loading: false,\r\n    success: false\r\n};\r\n\r\nexport const Spinner = ({ loading, success, ...props }) => {\r\n\treturn (\r\n\t\t<svg\r\n            className={`spinner ${loading ? 'loading' : success ? 'success' : 'failed'}`}\r\n\t\t\tversion='1.1'\r\n\t\t\tid='Layer_1'\r\n\t\t\txmlns='http://www.w3.org/2000/svg'\r\n\t\t\txmlnsXlink='http://www.w3.org/1999/xlink'\r\n\t\t\tx='0px'\r\n\t\t\ty='0px'\r\n\t\t\tviewBox='0 0 100 100'\r\n\t\t\tstyle={{ enableBackground: 'new 0 0 100 100' }}\r\n\t\t\txmlSpace='preserve'\r\n            preserveAspectRatio='xMidYMid meet'\r\n            width=\"20\"\r\n            height=\"20\"\r\n\t\t\t{...props}>\r\n\t\t\t<g>\r\n\t\t\t\t<circle className='circle' cx='50' cy='49.9999657' r='47.5' />\r\n\t\t\t\t<circle className='circle-dash' cx='50' cy='49.9999657' r='47.5' />\r\n                <polyline className='cross' points='35,35 70,70' stroke='red' />\r\n                <polyline className='cross' points='35,70 70,35' stroke='red' />\r\n                <polyline\r\n                    className='cross-dash'\r\n                    points='35,35 70,70'\r\n                    stroke='red'\r\n                />\r\n                <polyline\r\n                    className='cross-dash'\r\n                    points='35,70 70,35'\r\n                    stroke='red'\r\n                />\r\n                <polyline\r\n                    className='check'\r\n                    points='28.6469955,52.0561066 42.2152748,65.6243896 71.3530045,36.4866562 \t'\r\n                />\r\n                <polyline\r\n                    className='check-dash'\r\n                    points='28.6469955,52.0561066 42.2152748,65.6243896 71.3530045,36.4866562 \t'\r\n                />\r\n\t\t\t</g>\r\n\t\t</svg>\r\n\t);\r\n};\r\n\r\nSpinner.propTypes = SpinnerProps\r\nSpinner.defaultProps = SpinnerDefault","var map = {\n\t\"./GoogleAppScript.js\": 575,\n\t\"./index.js\": 560\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 574;","export const GoogleAppURL = 'https://script.google.com/macros/s/AKfycbx95DBR1q0dQ8lsx995CTTxtkR_45emS_drzfrSXPYAvfsaIsRV/exec';","const defaults = { \r\n    method: \"GET\", // *GET, POST, PUT, DELETE, etc.   \r\n    cache: \"default\", // *default, no-cache, reload, force-cache, only-if-cached\r\n    credentials: \"same-origin\", // include, *same-origin, omit\r\n    headers: {},\r\n    body: null,\r\n    responseType: \"\", // text, json, document, arraybuffer, blob\r\n    timeout: 0,\r\n    onupload: null,\r\n    ondownload: null\r\n}\r\n\r\nexport default defaults","import defaults from './defaults';\r\n\r\nexport const initialize = (options) => ({\r\n    ...defaults, \r\n    ...options, \r\n    headers: {\r\n        ...defaults.headers, \r\n        ...options.headers,\r\n    }\r\n})\r\n\r\nexport const global = (options) => {\r\n    Object.assign(defaults, options)\r\n}\r\n\r\nexport function ServerResponse (xhr) {\r\n    this.data = xhr.response\r\n    this.status = xhr.status\r\n    this.statusText = xhr.statusText\r\n    this.headers = xhr.getAllResponseHeaders().split(/\\n/)\r\n    .reduce((result, header) => {\r\n        const [key, value] = header.split(\": \")\r\n        if(key && value)\r\n            result[key] = value\r\n        return result\r\n    }, {})\r\n}","import { initialize, ServerResponse, global } from \"./utils\";\r\n\r\nconst request = (url, options = {}) => new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest() \r\n    const {\r\n        method,\r\n        cache,\r\n        credentials,\r\n        headers,\r\n        body,\r\n        responseType,\r\n        timeout,\r\n        onupload,\r\n        ondownload\r\n    } = initialize(options)\r\n    \r\n    xhr.open(method, url, true)\r\n\r\n    xhr.withCredentials = credentials.trim() === \"include\"\r\n\r\n    xhr.timeout = timeout\r\n\r\n    xhr.responseType = responseType\r\n\r\n    if(cache !== \"default\")\r\n        xhr.setRequestHeader(\"Cache-Control\", cache)\r\n\r\n    Object.keys(headers).forEach((key) => {\r\n        xhr.setRequestHeader(key, headers[key])\r\n    })\r\n    \r\n    if(xhr.upload)\r\n        xhr.upload.onprogress = onupload\r\n\r\n    xhr.onprogress = ondownload\r\n\r\n    xhr.onload = () => resolve(new ServerResponse(xhr))\r\n\r\n    xhr.onabort = () => reject(new DOMException('Aborted', 'AbortError'))\r\n\r\n    xhr.onerror = xhr.ontimeout = () => reject(new TypeError('Network request failed'))\r\n\r\n    xhr.send(body)\r\n})\r\n\r\nrequest.global = global\r\n\r\nexport default request"],"sourceRoot":""}